(this.webpackJsonpinstagram=this.webpackJsonpinstagram||[]).push([[0],{63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},74:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(4),s=a(2),c=a.n(s),r=a(17),i=a.n(r),o=(a(63),a(13)),l=(a(64),a(65),a(104)),j=a(26),u=j.a.initializeApp({apiKey:"AIzaSyCU7LFyzG4bertXvO2e0UYLvBSE11pinsM",authDomain:"insta-a46e3.firebaseapp.com",projectId:"insta-a46e3",storageBucket:"insta-a46e3.appspot.com",messagingSenderId:"662799527468",appId:"1:662799527468:web:e9651a9252c7178030eb89",measurementId:"G-JB9DEXBNZL"}),p=u.firestore(),d=u.auth(),b=u.storage();var m=function(e){var t=e.postId,a=e.user,c=e.username,r=e.caption,i=e.imageUrl,u=Object(s.useState)(""),d=Object(o.a)(u,2),b=d[0],m=d[1],O=Object(s.useState)([]),h=Object(o.a)(O,2),g=h[0],f=h[1];return Object(s.useEffect)((function(){var e;return t&&(e=p.collection("posts").doc(t).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){f(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[t]),Object(n.jsxs)("div",{className:"post",children:[Object(n.jsxs)("div",{className:"post__header",children:[Object(n.jsx)(l.a,{className:"post__avatar",alt:c,src:"/static/image/avatar/1.jpg"}),Object(n.jsx)("h4",{children:c})]}),Object(n.jsx)("img",{className:"post__image",src:i,alt:""}),Object(n.jsxs)("h5",{className:"post__text",children:[Object(n.jsxs)("strong",{children:[c," "]})," :  ",r]}),Object(n.jsx)("div",{className:"post__comments",children:g.map((function(e){return Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:e.username})," ",e.text]})}))}),a&&Object(n.jsxs)("form",{className:"post__commentBox",children:[Object(n.jsx)("input",{className:"post__input",type:"text",placeholder:"Add a comment.....",value:b,onChange:function(e){return m(e.target.value)}}),Object(n.jsx)("button",{className:"post__button",disabled:!b,type:"submit",onClick:function(e){e.preventDefault(),p.collection("posts").doc(t).collection("comments").add({text:b,username:a.displayName,timestamp:j.a.firestore.FieldValue.serverTimestamp()}),m("")},children:"Post"})]})]})},O=a(101),h=a(100),g=a(103),f=a(102),x=a(45),v=a.n(x),_=a(46),y=a.n(_),N=a(54),S=a.n(N);a(74);var w=function(e){var t=e.username,a=Object(s.useState)(""),c=Object(o.a)(a,2),r=c[0],i=c[1],l=Object(s.useState)(0),u=Object(o.a)(l,2),d=u[0],m=u[1],O=Object(s.useState)(null),h=Object(o.a)(O,2),g=h[0],x=h[1];return Object(n.jsxs)("div",{className:"imageupload",children:[Object(n.jsx)("progress",{className:"imageupload__progress",value:d,max:"100"}),Object(n.jsx)("input",{type:"text",placeholder:"Enter a caption...",onChange:function(e){return i(e.target.value)},value:r}),Object(n.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&x(e.target.files[0])}}),Object(n.jsx)(f.a,{onClick:function(){b.ref("images/".concat(g.name)).put(g).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);m(t)}),(function(e){console.log(e),alert(e.message)}),(function(){b.ref("images").child(g.name).getDownloadURL().then((function(e){p.collection("posts").add({timestamp:j.a.firestore.FieldValue.serverTimestamp(),caption:r,imageUrl:e,username:t}),m(0),i(""),x(null)}))}))},children:"Upload"})]})};function C(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var I=Object(h.a)((function(e){return{paper:{position:"absolute",width:300,height:270,backgroundColor:e.palette.background.paper,border:"1px solid #000",boxShadow:e.shadows[5],padding:e.spacing(5,7,6)}}}));var k=function(){var e=I(),t=Object(s.useState)(C),a=Object(o.a)(t,1)[0],c=Object(s.useState)([]),r=Object(o.a)(c,2),i=r[0],l=r[1],j=Object(s.useState)(!1),u=Object(o.a)(j,2),b=u[0],h=u[1],x=Object(s.useState)(!1),_=Object(o.a)(x,2),N=_[0],k=_[1],U=Object(s.useState)(""),B=Object(o.a)(U,2),E=B[0],L=B[1],A=Object(s.useState)(""),D=Object(o.a)(A,2),F=D[0],P=D[1],T=Object(s.useState)(""),z=Object(o.a)(T,2),J=z[0],M=z[1],G=Object(s.useState)(null),V=Object(o.a)(G,2),W=V[0],X=V[1];return Object(s.useEffect)((function(){var e=d.onAuthStateChanged((function(e){e?(console.log(e),X(e)):X(null)}));return function(){e()}}),[W,E]),Object(s.useEffect)((function(){p.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){l(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(O.a,{open:b,onClose:function(){return h(!1)},children:Object(n.jsx)("div",{style:a,className:e.paper,children:Object(n.jsxs)("form",{children:[Object(n.jsxs)("center",{children:[Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),Object(n.jsx)("h5",{children:"Sign up to see photos and videos from your friends."})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{classname:"username",children:[Object(n.jsx)(S.a,{className:"icons"}),Object(n.jsx)(g.a,{placeholder:"username",type:"text",value:E,onChange:function(e){return L(e.target.value)}})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{classname:"email",children:[Object(n.jsx)(v.a,{className:"icons"}),Object(n.jsx)(g.a,{placeholder:"email",type:"text",value:F,onChange:function(e){return P(e.target.value)}})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{classname:"password",children:[Object(n.jsx)(y.a,{className:"icons"}),Object(n.jsx)(g.a,{placeholder:"password",type:"password",value:J,onChange:function(e){return M(e.target.value)}})]}),Object(n.jsx)("br",{}),Object(n.jsx)("center",{children:Object(n.jsx)(f.a,{type:"submit",onClick:function(e){e.preventDefault(),d.createUserWithEmailAndPassword(F,J).then((function(e){return e.user.updateProfile({displayName:E})})).catch((function(e){return alert(e.message)})),h(!1)},children:"Sign Up"})})]})})}),Object(n.jsx)(O.a,{open:N,onClose:function(){return k(!1)},children:Object(n.jsx)("div",{style:a,className:e.paper,children:Object(n.jsxs)("form",{children:[Object(n.jsxs)("center",{children:[Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),Object(n.jsx)("h5",{children:"Sign up to see photos and videos from your friends."})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{classname:"email",children:[Object(n.jsx)(v.a,{className:"icons"}),Object(n.jsx)(g.a,{placeholder:"email",type:"text",value:F,onChange:function(e){return P(e.target.value)}})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{classname:"password",children:[Object(n.jsx)(y.a,{className:"icons"}),Object(n.jsx)(g.a,{placeholder:"password",type:"password",value:J,onChange:function(e){return M(e.target.value)}})]}),Object(n.jsx)("br",{}),Object(n.jsx)("center",{children:Object(n.jsx)(f.a,{type:"submit",onClick:function(e){e.preventDefault(),d.signInWithEmailAndPassword(F,J).catch((function(e){return alert(e.message)})),k(!1)},children:"Sign In"})})]})})}),Object(n.jsxs)("div",{className:"app__header",children:[Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),W?Object(n.jsx)(f.a,{onClick:function(){return d.signOut()},children:"Logout"}):Object(n.jsxs)("div",{className:"app__loginContainer",children:[Object(n.jsx)(f.a,{onClick:function(){return k(!0)},children:"Sign In"}),Object(n.jsx)(f.a,{onClick:function(){return h(!0)},children:"Sign Up"})]})]}),Object(n.jsx)("div",{className:"app__posts",children:i.map((function(e){var t=e.id,a=e.post;return Object(n.jsx)(m,{postId:t,user:W,username:a.username,caption:a.caption,imageUrl:a.imageUrl},t)}))}),(null===W||void 0===W?void 0:W.displayName)?Object(n.jsx)(w,{username:W.displayName}):Object(n.jsx)("h3",{children:"Login to upload"})]})},U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,106)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.getElementById("root")),U()}},[[77,1,2]]]);
//# sourceMappingURL=main.de348e51.chunk.js.map